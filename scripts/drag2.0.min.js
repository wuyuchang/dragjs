function drag(h,l,k,d){var c=document.getElementById(h),f={},a=document.body.clientWidth,b=document.body.clientHeight;f.parent=c;f.children=c.children;f.len=c.children.length;f.animating=false;c.addEventListener("touchstart",g,false);c.addEventListener("mousedown",g,false);function g(n){n.preventDefault();if(!f.animating){f.X1=(n.touches&&n.touches[0].pageX)||n.pageX;f.Y1=(n.touches&&n.touches[0].pageY)||n.pageY;f.deltaX=false;f.deltaY=false;if(!f.current){f.now=f.current=_findParent((n.touches&&n.touches[0].target)||n.target,l);j(n)}c.addEventListener("touchmove",e,false);c.addEventListener("touchend",m,false);c.addEventListener("mousemove",e,false);c.addEventListener("mouseup",m,false);if(d&&typeof d.touchstart==="function"){d.touchstart(f)}}}function e(o){o.preventDefault();if(!f.animating){f.X2=(o.touches&&o.touches[0].pageX)||o.pageX;f.Y2=(o.touches&&o.touches[0].pageY)||o.pageY;f.deltaX=f.X2-f.X1;f.deltaY=f.Y2-f.Y1;if(k=="y"){f.percent=1-Math.abs(f.deltaY/b);if(f.deltaY>0){f.current.style.webkitTransformOrigin=f.current.style.transformOrigin="center bottom";f.now=f.prev}else{f.current.style.webkitTransformOrigin=f.current.style.transformOrigin="center top";f.now=f.next}f.current.style.webkitTransform=f.current.style.transform="scale3d("+f.percent+", "+f.percent+", 1)";f.prev.style.webkitTransform=f.prev.style.transform="translate3d(0, "+(f.deltaY-b)+"px, 0)";f.next.style.webkitTransform=f.next.style.transform="translate3d(0, "+(f.deltaY+b)+"px, 0)"}else{if(k=="x"){f.percent=1-Math.abs(f.deltaX/a)*0.2;var n=0.8+Math.abs(f.deltaX/a)*0.2;if(f.deltaX>0){f.prev.style.webkitTransformOrigin=f.prev.style.transformOrigin="left center";f.current.style.webkitTransformOrigin=f.current.style.transformOrigin="right center";f.now=f.prev}else{f.next.style.webkitTransformOrigin=f.next.style.transformOrigin="right center";f.current.style.webkitTransformOrigin=f.current.style.transformOrigin="left center";f.now=f.next}f.now.style.opacity=Math.abs(f.deltaX/a)+0.2;f.now.style.webkitTransform=f.now.style.transform="scale3d("+n+", "+n+", 1)";f.current.style.webkitTransform=f.current.style.transform="translate3d("+f.deltaX+"px, 0, 0) scale3d("+f.percent+", "+f.percent+", 1)"}}if(d&&d.touchmove==="function"){d.touchmove(f)}}}function m(o){o.preventDefault();if(!f.animating){if(!f.deltaY){j(o)}else{f.animating=true;if(k=="y"){if(f.deltaY>50){f.prev.style.webkitTransform=f.prev.style.transform="translate3d(0, 0, 0)";f.current.style.webkitTransform=f.current.style.transform="scale3d(.2, .2, 1)";f.prev.style.zIndex=2;f.now=f.prev}else{if(f.deltaY<-50){f.next.style.webkitTransform=f.next.style.transform="translate3d(0, 0, 0)";f.current.style.webkitTransform=f.current.style.transform="scale3d(.2, .2, 1)";f.next.style.zIndex=2;f.now=f.next}else{f.current.style.webkitTransform=f.current.style.transform="scale3d(1, 1, 1)";f.prev.style.webkitTransform=f.prev.style.transform="translate3d(0 ,-"+b+"px, 0)";f.next.style.webkitTransform=f.next.style.transform="translate3d(0 ,"+b+"px, 0)"}}}else{if(k=="x"){if(f.deltaX>50){f.prev.style.opacity=1;f.prev.style.webkitTransform=f.prev.style.transform="scale3d(1, 1, 1)";f.current.style.webkitTransform=f.current.style.transform="translate3d("+a+"px, 0, 0)";f.now=f.prev}else{if(f.deltaX<-50){f.next.style.opacity=1;f.next.style.webkitTransform=f.next.style.transform="scale3d(1, 1, 1)";f.current.style.webkitTransform=f.current.style.transform="translate3d(-"+a+"px, 0, 0)";f.now=f.next}else{f.current.style.webkitTransform=f.current.style.transform="scale3d(1, 1, 1)";f.prev.style.webkitTransform=f.prev.style.transform="scale3d(.8, .8, .8)";f.next.style.webkitTransform=f.next.style.transform="scale3d(.8, .8, .8)"}}}}f.current.style.webkitTransition=f.prev.style.webkitTransition=f.next.style.webkitTransition="all .4s ease-out";f.current.style.transition=f.prev.style.transition=f.next.style.transition="all .4s ease-out";function n(){f.current.removeEventListener("transitionend",n,false);f.current.removeEventListener("webkitTransitionEnd",n,false);f.current.style.webkitTransition=f.current.style.transition="";f.prev.style.webkitTransition=f.prev.style.transition="";f.next.style.webkitTransition=f.next.style.transition="";if(k=="y"){if(f.deltaY>50){f.prev.style.webkitTransform=f.prev.style.transform="";f.next.style.webkitTransform=f.next.style.transform="";f.next.style.display="none";f.current=f.prev}else{if(f.deltaY<-50){f.next.style.webkitTransform=f.next.style.transform="";f.prev.style.webkitTransform=f.prev.style.transform="";f.prev.style.display="none";f.current=f.next}}}else{if(k=="x"){if(f.deltaX>50){f.prev.style.webkitTransform=f.prev.style.transform="";f.next.style.webkitTransform=f.next.style.transform="";f.next.style.opacity=0;f.next.style.display="none";f.current=f.prev}else{if(f.deltaX<-50){f.next.style.webkitTransform=f.next.style.transform="";f.prev.style.webkitTransform=f.prev.style.transform="";f.prev.style.opacity=0;f.prev.style.display="none";f.current=f.next}}}}j(o);f.animating=false;c.removeEventListener("touchmove",e,false);c.removeEventListener("touchend",m,false);c.removeEventListener("mousemove",e,false);c.removeEventListener("mouseup",m,false);if(k=="y"){if((f.deltaY>50||f.deltaY<-50)&&d&&typeof d.pagend==="function"){d.pagend(f)}}else{if(k=="x"){if((f.deltaX>50||f.deltaX<-50)&&d&&typeof d.pagend==="function"){d.pagend(f)}}}}f.current.addEventListener("webkitTransitionEnd",n,false);f.current.addEventListener("transitionend",n,false);if(k=="y"){if((f.deltaY>50||f.deltaY<-50)&&d&&typeof d.touchend==="function"){d.touchend(f)}}else{if(k=="x"){if((f.deltaX>50||f.deltaX<-50)&&d&&typeof d.touchend==="function"){d.touchend(f)}}}}}}function j(){f.current.style.webkitTransform=f.current.style.transform="translate3d(0, 0, 0)";f.prev=f.current.previousElementSibling||f.current.parentNode.lastElementChild;f.next=f.current.nextElementSibling||f.current.parentNode.firstElementChild;if(k=="y"){f.prev.style.webkitTransform=f.prev.style.transform="translate3d(0, -"+b+"px, 0)";f.next.style.webkitTransform=f.next.style.transform="translate3d(0, "+b+"px, 0)";f.prev.style.display=f.next.style.display="block";f.prev.style.zIndex=f.next.style.zIndex=f.current.style.zIndex=0}else{if(k=="x"){f.prev.style.webkitTransform=f.prev.style.transform="scale3d(.8, .8, 1)";f.next.style.webkitTransform=f.next.style.transform="scale3d(.8, .8, 1)";f.prev.style.opacity=f.next.style.opacity=0;f.prev.style.display=f.next.style.display="block";f.prev.style.zIndex=f.next.style.zIndex=0;f.current.style.zIndex=2}}}}function _findParent(a,b){if(a){if(!hasClass(a,b)){return _findParent(a.parentNode,b)}else{return a}}}function hasClass(a,c){if(a){if(a.classList){return a.classList.contains(c)}else{var b=/(^\s+)|(\s+$)/g;a.className=a.className.replace(b,"");var c=c.replace(b,""),d=a.className.split(" ");for(i in d){if(d[i]==c){return true}}return false}}}function addClass(a,c){if(a){if(a.classList){a.classList.add(c)}else{var b=/(^\s+)|(\s+$)/g;c=c.replace(b,"");a.className=a.className.replace(b,"");if(!hasClass(a,c)){if(a.className==""){a.className=c}else{a.className+=" "+c}}return a.className}}}function removeClass(a,c){if(a){if(a.classList){a.classList.remove(c)}else{var b=/(^\s+)|(\s+$)/g;a.className=a.className.replace(b,"");var c=c.replace(b,""),d=a.className.split(" ");for(i in d){if(d[i]==c){d.splice(i,1);a.className=d.join(" ");return a.className}}return a.className}}};